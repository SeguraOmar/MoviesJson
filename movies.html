<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/style/movies.css">
    <title>Movie Details</title>
</head>

<body>
    <div id="movieDetails" class="container shadow-lg">
        <div class="movie-info">
            <h2 id="title"></h2>
            <img class="imgMovie" id="poster" alt="affiche du film">
            <p>Date de sortie : <i id="releaseDate"></i></p>
            <p class="note" id="voteAverage"></p>
            <p id="overview"></p>
        </div>

    </div>

    <script>


        const urlParams = new URLSearchParams(window.location.search);
        const movieId = urlParams.get('id');
        console.log(movieId);


        const options = {
            method: 'GET',
            headers: {
                accept: 'application/json',
                Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI1MTdjYzc0OTU1MTQ5YmUyM2RmODM4MTNmMjAxYTRlOCIsInN1YiI6IjYyODM5OGJiZWM0NTUyMTAzMmE5NTcxMyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.REF4Oi-K06F7Jq8LolG5vPQtyeiGk3nBFdDyL1FLq7E'
            }
        };

        fetch(`https://api.themoviedb.org/3/movie/${movieId}?language=fr-FR`, options)
            .then(res => res.json())
            .then(data => {

                const movieDetailsContainer = document.querySelector('#movieDetails');
                const title = document.querySelector('#title');
                const poster = document.querySelector('#poster');
                const releaseDate = document.querySelector('#releaseDate');
                const voteAverage = document.querySelector('#voteAverage');
                const overview = document.querySelector('#overview');
                const castList = document.querySelector('#castList');
                const crewList = document.querySelector('#crewList');

                title.textContent = data.title;
                poster.src = `https://image.tmdb.org/t/p/original/${data.poster_path}`;
                poster.alt = data.title;
                releaseDate.textContent = data.release_date;
                voteAverage.textContent = `${data.vote_average * 10}%`;
                overview.textContent = data.overview;
            }
            );


    </script>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</body>

</html>